"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window.jd=function(e,t){function n(e,r){return r?("string"==typeof r&&(r=n(r)),r.querySelector(e)):o[e]||(o[e]=t.querySelector(e))}function r(e,n,r,o){var i=t.createElement(e);if("string"==typeof n)i.textContent=n;else if(n instanceof HTMLElement)i.appendChild(n);else if(null!==n&&"object"===(void 0===n?"undefined":_typeof(n)))for(var f in n)if("_"===f)n[f]instanceof HTMLElement?i.appendChild(n[f]):i.textContent=n[f];else if(null!==n[f]&&"object"===_typeof(n[f])){if("style"===f)for(var l in n[f])i.style.setProperty(l,n[f][l]);else if("events"===f)for(var y in n[f])i.addEventListener(y,n[f][y])}else i.setAttribute(f,n[f]);if(Array.isArray(r)){var a=!0,u=!1,c=void 0;try{for(var p,s=r[Symbol.iterator]();!(a=(p=s.next()).done);a=!0){var d=p.value;i.appendChild(d)}}catch(e){u=!0,c=e}finally{try{!a&&s.return&&s.return()}finally{if(u)throw c}}}return o&&o.appendChild(i),i}var o={};return{find:n,f:n,create:r,c:r}}(window,document);
"use strict";var storyInput=jd.f(".story-input"),partsOfSpeechInput=jd.f(".parts-of-speech"),speechRegex=/\[([\w\s]+)\]/g,updateParts=function(){var e=storyInput.value;localStorage.setItem("story",e);for(var t=[],r=speechRegex.exec(e);null!=r;)t.push(r[1]),r=speechRegex.exec(e);var a=0,p=!0,u=!1,o=void 0;try{for(var s,n=partsOfSpeechInput.querySelectorAll(".replace-speech")[Symbol.iterator]();!(p=(s=n.next()).done);p=!0){var c=s.value;t[a]?c.textContent=t[a]:partsOfSpeechInput.removeChild(c.parentNode),++a}}catch(e){u=!0,o=e}finally{try{!p&&n.return&&n.return()}finally{if(u)throw o}}for(;a<t.length;)jd.c("label",{},[jd.c("span",{class:"replace-speech",_:t[a]}),jd.c("input",{class:"replace-input",_:t[a]})],partsOfSpeechInput),++a;updateStory()},bracketedRegex=/\[([\w\s]+)\]/g,updateStory=function(){var e=storyInput.value,t=Array.prototype.slice.call(document.querySelectorAll(".replace-input")).map(function(e){return e.value});if(-1===t.indexOf("")){var r=0;e=e.replace(bracketedRegex,function(e){return t[r++]||e}),jd.f(".final-story").classList.remove("hide"),jd.f(".final-story").textContent=e}};storyInput.value=localStorage.getItem("story")||"",updateParts();var updatePartsTimeout=void 0;storyInput.addEventListener("keydown",function(e){"Enter"===e.key||"."===e.key?updateParts():(updatePartsTimeout&&clearTimeout(updatePartsTimeout),updatePartsTimeout=setTimeout(updateParts,1e3))}),storyInput.addEventListener("paste",updateParts);var partsOfSpeechTimeout=void 0;partsOfSpeechInput.addEventListener("keydown",function(e){partsOfSpeechTimeout&&clearTimeout(partsOfSpeechTimeout),partsOfSpeechTimeout=setTimeout(updateStory,1e3)});